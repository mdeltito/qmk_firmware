#pragma once

#ifdef OLED_DRIVER_ENABLE
oled_rotation_t oled_init_user(oled_rotation_t rotation) {
  if (!is_keyboard_master())
    return OLED_ROTATION_180;
  return rotation;
}

static void render_logo(void) {
    static const char PROGMEM company_logo[] = {
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xe0, 0xe0, 0xf0, 0x70, 0xf8, 0xfc, 
      0xfc, 0x5e, 0x4e, 0x4f, 0x4f, 0x4f, 0x5e, 0x5c, 0xfc, 0xf8, 0x78, 0xf0, 0xf0, 0xe0, 0xc0, 0xc0, 
      0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x0f, 
      0x3f, 0x7f, 0xfb, 0xda, 0x9a, 0x9a, 0x7a, 0x3f, 0x1f, 0x03, 0x00, 0x00, 0x00, 0x01, 0x03, 0xff, 
      0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0xe0, 0x30, 0x18, 0x08, 
      0x18, 0x10, 0xf0, 0x00, 0xc0, 0xf0, 0x18, 0x08, 0x08, 0x08, 0xf8, 0xf0, 0x00, 0xc0, 0xf0, 0xf8, 
      0x78, 0x38, 0x38, 0xff, 0xff, 0xff, 0x00, 0xf0, 0xf8, 0xf8, 0x38, 0x38, 0x78, 0xf0, 0xf0, 0x00, 
      0x00, 0x80, 0xb8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xc0, 0x80, 0x80, 0x00, 0x00, 0xc0, 0xf8, 
      0xfc, 0x6e, 0x6d, 0x6d, 0x6d, 0x6f, 0x6f, 0xfe, 0xf8, 0xc0, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xff, 
      0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x08, 0x00, 0x07, 0x0c, 0x08, 0x08, 
      0x08, 0x0c, 0x07, 0x00, 0x03, 0x07, 0x0c, 0xc8, 0xc8, 0x48, 0x7f, 0x1f, 0x00, 0x03, 0x07, 0x0f, 
      0x0e, 0x0c, 0x0c, 0x0f, 0x0f, 0x0f, 0x00, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x00, 
      0x00, 0x0f, 0x0f, 0x0f, 0x0d, 0x0d, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x03, 0x07, 0x0f, 0x0e, 0x1f, 0x1f, 
      0x3f, 0x7b, 0x7b, 0xf3, 0xf3, 0x73, 0x7b, 0x3f, 0x3f, 0x1f, 0x0e, 0x0f, 0x07, 0x07, 0x03, 0x01, 
      0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };

    oled_write_raw_P(company_logo, sizeof(company_logo));
}

static void render_status(void) {
  bool blink = (timer_read() % 1000) < 500;

  if (layer_state_is(_LOWER)) {
    oled_write_ln_P(blink ? PSTR("       > lo_") : PSTR("       > lo "), false);
    oled_write_P(PSTR("       Layer: Lower\n"), false);
  } else if (layer_state_is(_RAISE)) {
    oled_write_ln_P(blink ? PSTR("       > hi_") : PSTR("       > hi "), false);
    oled_write_P(PSTR("       Layer: Raise\n"), false);
  } else {
    oled_write_ln_P(blink ? PSTR("       > _ ") : PSTR("       >     "), false);
    oled_write_P(PSTR("       Layer: Qwerty\n"), false);
  }
}

void oled_task_user(void) {
  if (is_keyboard_master()) {
    render_status();
  } else {
    render_logo();
  }
}
#endif